<?xml version="1.0" encoding="iso-8859-1"?>
<!-- This is our MVP for the Extension Tutorial -->
<root release="3.0" version="3">
	<properties>
		<name>Coins weight</name>
		<version>0.0.2</version>
		<author>Cédric Zuger</author>
		<description>An extension that compute and show the weight of the coins.	
		</description>
	</properties>
	
		
	<base>
		<script name="CoinsWeight" file="scripts/coins_weight.lua" />
		<!-- script name="ManagerItem" file="scripts/coins_weight.lua" / -->
		
		<string name="char_label_treasurload">Coins</string>
		<string name="char_label_totalload">Total</string>
				
		<windowclass name="charsheet_inventory_contents" merge="join">	
			<sheetdata>		
						
				<simplenumber name="treasureload" source="encumbrance.treasure">
					<anchored to="encumbranceload" width="60" height="30">
						<top anchor="topleft" relation="relative" offset="-30" />
						<left offset="-70" />
					</anchored>
					<frame name="fieldlight" offset="7,5,7,5" />
					<font>sheetlabel</font>
					<readonly />
				  <script>
					function onValueChanged()
						CoinsWeight.recomputeTotalWeight( window.getDatabaseNode() );
					end			
				  </script>					
				</simplenumber>
				
				<simplenumber name="totalload" source="encumbrance.total">
					<anchored to="treasureload" width="60" height="30">
						<top anchor="topleft" relation="relative" offset="-30" />
						<left offset="-70" />
					</anchored>
					<frame name="fieldlight" offset="7,5,7,5" />
					<font>sheetlabel</font>
					<readonly />
				</simplenumber>				
				
				<label_fieldtop name="treasureload_label">
					<anchored to="treasureload" />
					<static textres="char_label_treasurload" />
				</label_fieldtop>
				
				<label_fieldtop name="totalload_label">
					<anchored to="totalload" />
					<static textres="char_label_totalload" />
				</label_fieldtop>				
		
				<simplenumber name="encumbranceload" source="encumbrance.load">
				  <script>
					function onValueChanged()
						CoinsWeight.recomputeTotalWeight( window.getDatabaseNode() );
					end			
				  </script>
				</simplenumber>
				
				<number_dropadd name="coinamount1">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>			

				<number_dropadd name="coinamount2">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>	

				<number_dropadd name="coinamount3">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>	

				<number_dropadd name="coinamount4">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>	

				<number_dropadd name="coinamount5">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>	

				<number_dropadd name="coinamount6">
				  <script>
					function onValueChanged()
						CoinsWeight.onCoinsValueChanged( window.getDatabaseNode() );
					end			
				  </script>
				</number_dropadd>					
			
			</sheetdata>
		</windowclass>	
	
	</base>

</root>